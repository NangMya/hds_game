{
    "sourceFile": "components/MotionTracker.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1768979329622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768979373170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,79 +0,0 @@\n-\"use client\";\r\n-import { useState, useEffect, useRef } from 'react';\r\n-\r\n-export default function MotionTracker() {\r\n-  const [distance, setDistance] = useState({ x: 0, y: 0 });\r\n-  const [velocity, setVelocity] = useState({ x: 0, y: 0 });\r\n-  \r\n-  // အရှိန်တွေကို Filter လုပ်ဖို့ သိမ်းထားတဲ့ variable များ\r\n-  const lastTime = useRef(Date.now());\r\n-  const v = useRef({ x: 0, y: 0 });\r\n-  const s = useRef({ x: 0, y: 0 });\r\n-  const lowPassAcc = useRef({ x: 0, y: 0 });\r\n-\r\n-  const ALPHA = 0.2; // Filter strength (0 ကနေ 1 အထိ၊ ငြိမ်စေချင်ရင် လျှော့ပါ)\r\n-\r\n-  useEffect(() => {\r\n-    const handleMotion = (event) => {\r\n-      const now = Date.now();\r\n-      const dt = (now - lastTime.current) / 1000; // စက္ကန့်အဖြစ်ပြောင်းလဲခြင်း\r\n-      lastTime.current = now;\r\n-\r\n-      let rawX = event.acceleration.x || 0;\r\n-      let rawY = event.acceleration.y || 0;\r\n-\r\n-      // 1. Low-Pass Filter (ဆူညံမှုများကို ဖယ်ထုတ်ခြင်း)\r\n-      lowPassAcc.current.x = lowPassAcc.current.x + ALPHA * (rawX - lowPassAcc.current.x);\r\n-      lowPassAcc.current.y = lowPassAcc.current.y + ALPHA * (rawY - lowPassAcc.current.y);\r\n-\r\n-      // 2. Threshold (အလွန်သေးငယ်တဲ့ တုန်ခါမှုတွေကို လျစ်လျူရှုခြင်း)\r\n-      const threshold = 0.1;\r\n-      const accX = Math.abs(lowPassAcc.current.x) > threshold ? lowPassAcc.current.x : 0;\r\n-      const accY = Math.abs(lowPassAcc.current.y) > threshold ? lowPassAcc.current.y : 0;\r\n-\r\n-      // 3. Physics: Velocity v = u + at\r\n-      v.current.x += accX * dt;\r\n-      v.current.y += accY * dt;\r\n-\r\n-      // 4. Physics: Distance s = s + vt\r\n-      s.current.x += v.current.x * dt;\r\n-      s.current.y += v.current.y * dt;\r\n-\r\n-      // UI update လုပ်ခြင်း\r\n-      setDistance({ x: s.current.x.toFixed(2), y: s.current.y.toFixed(2) });\r\n-      setVelocity({ x: v.current.x.toFixed(2), y: v.current.y.toFixed(2) });\r\n-    };\r\n-\r\n-    // iOS အတွက် Permission တောင်းခံခြင်း\r\n-    if (typeof DeviceMotionEvent.requestPermission === 'function') {\r\n-      DeviceMotionEvent.requestPermission()\r\n-        .then(permissionState => {\r\n-          if (permissionState === 'granted') {\r\n-            window.addEventListener('devicemotion', handleMotion);\r\n-          }\r\n-        });\r\n-    } else {\r\n-      window.addEventListener('devicemotion', handleMotion);\r\n-    }\r\n-\r\n-    return () => window.removeEventListener('devicemotion', handleMotion);\r\n-  }, []);\r\n-\r\n-  return (\r\n-    <div className=\"p-10 text-center\">\r\n-      <h2 className=\"text-xl font-bold\">Movement Tracker</h2>\r\n-      <div className=\"mt-5 border p-5 rounded-lg shadow-md\">\r\n-        <p>အလျင် (Velocity): {velocity.x} m/s, {velocity.y} m/s</p>\r\n-        <p className=\"text-2xl mt-3\">\r\n-          ရွေ့လျားမှု (Distance): <b>{distance.x} m</b> (X), <b>{distance.y} m</b> (Y)\r\n-        </p>\r\n-      </div>\r\n-      <button \r\n-        onClick={() => window.location.reload()} \r\n-        className=\"mt-5 bg-blue-500 text-white p-2 rounded\"\r\n-      >\r\n-        Reset Position\r\n-      </button>\r\n-    </div>\r\n-  );\r\n-}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1768979329621,
            "name": "Commit-0",
            "content": "\"use client\";\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nexport default function MotionTracker() {\r\n  const [distance, setDistance] = useState({ x: 0, y: 0 });\r\n  const [velocity, setVelocity] = useState({ x: 0, y: 0 });\r\n  \r\n  // အရှိန်တွေကို Filter လုပ်ဖို့ သိမ်းထားတဲ့ variable များ\r\n  const lastTime = useRef(Date.now());\r\n  const v = useRef({ x: 0, y: 0 });\r\n  const s = useRef({ x: 0, y: 0 });\r\n  const lowPassAcc = useRef({ x: 0, y: 0 });\r\n\r\n  const ALPHA = 0.2; // Filter strength (0 ကနေ 1 အထိ၊ ငြိမ်စေချင်ရင် လျှော့ပါ)\r\n\r\n  useEffect(() => {\r\n    const handleMotion = (event) => {\r\n      const now = Date.now();\r\n      const dt = (now - lastTime.current) / 1000; // စက္ကန့်အဖြစ်ပြောင်းလဲခြင်း\r\n      lastTime.current = now;\r\n\r\n      let rawX = event.acceleration.x || 0;\r\n      let rawY = event.acceleration.y || 0;\r\n\r\n      // 1. Low-Pass Filter (ဆူညံမှုများကို ဖယ်ထုတ်ခြင်း)\r\n      lowPassAcc.current.x = lowPassAcc.current.x + ALPHA * (rawX - lowPassAcc.current.x);\r\n      lowPassAcc.current.y = lowPassAcc.current.y + ALPHA * (rawY - lowPassAcc.current.y);\r\n\r\n      // 2. Threshold (အလွန်သေးငယ်တဲ့ တုန်ခါမှုတွေကို လျစ်လျူရှုခြင်း)\r\n      const threshold = 0.1;\r\n      const accX = Math.abs(lowPassAcc.current.x) > threshold ? lowPassAcc.current.x : 0;\r\n      const accY = Math.abs(lowPassAcc.current.y) > threshold ? lowPassAcc.current.y : 0;\r\n\r\n      // 3. Physics: Velocity v = u + at\r\n      v.current.x += accX * dt;\r\n      v.current.y += accY * dt;\r\n\r\n      // 4. Physics: Distance s = s + vt\r\n      s.current.x += v.current.x * dt;\r\n      s.current.y += v.current.y * dt;\r\n\r\n      // UI update လုပ်ခြင်း\r\n      setDistance({ x: s.current.x.toFixed(2), y: s.current.y.toFixed(2) });\r\n      setVelocity({ x: v.current.x.toFixed(2), y: v.current.y.toFixed(2) });\r\n    };\r\n\r\n    // iOS အတွက် Permission တောင်းခံခြင်း\r\n    if (typeof DeviceMotionEvent.requestPermission === 'function') {\r\n      DeviceMotionEvent.requestPermission()\r\n        .then(permissionState => {\r\n          if (permissionState === 'granted') {\r\n            window.addEventListener('devicemotion', handleMotion);\r\n          }\r\n        });\r\n    } else {\r\n      window.addEventListener('devicemotion', handleMotion);\r\n    }\r\n\r\n    return () => window.removeEventListener('devicemotion', handleMotion);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-10 text-center\">\r\n      <h2 className=\"text-xl font-bold\">Movement Tracker</h2>\r\n      <div className=\"mt-5 border p-5 rounded-lg shadow-md\">\r\n        <p>အလျင် (Velocity): {velocity.x} m/s, {velocity.y} m/s</p>\r\n        <p className=\"text-2xl mt-3\">\r\n          ရွေ့လျားမှု (Distance): <b>{distance.x} m</b> (X), <b>{distance.y} m</b> (Y)\r\n        </p>\r\n      </div>\r\n      <button \r\n        onClick={() => window.location.reload()} \r\n        className=\"mt-5 bg-blue-500 text-white p-2 rounded\"\r\n      >\r\n        Reset Position\r\n      </button>\r\n    </div>\r\n  );\r\n}"
        }
    ]
}